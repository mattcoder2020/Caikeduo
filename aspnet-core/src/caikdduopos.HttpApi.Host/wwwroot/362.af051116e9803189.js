"use strict";(self.webpackChunkAccessManagment=self.webpackChunkAccessManagment||[]).push([[362],{9362:(O,g,l)=>{l.r(g),l.d(g,{StoreModule:()=>F});var h=l(4755),S=l(4466),f=l(672),p=l(6304),s=l(5030),_=l(6104),m=l(939),u=(()=>((u=u||{})[u.Opening=0]="Opening",u[u.Closed=1]="Closed",u))();const x=(0,p.Uoq)(u);var t=l(2223);let T=(()=>{class o{constructor(e){this.restService=e,this.apiName="Default",this.create=(a,n)=>this.restService.request({method:"POST",url:"/api/app/store",body:a},{apiName:this.apiName,...n}),this.delete=(a,n)=>this.restService.request({method:"DELETE",url:`/api/app/store/${a}`},{apiName:this.apiName,...n}),this.get=(a,n)=>this.restService.request({method:"GET",url:`/api/app/store/${a}`},{apiName:this.apiName,...n}),this.getList=(a,n)=>this.restService.request({method:"GET",url:"/api/app/store",params:{sorting:a.sorting,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName,...n}),this.queryByFiltrationByQ=(a,n)=>this.restService.request({method:"POST",url:"/api/app/store/query-by-filtration",body:a},{apiName:this.apiName,...n}),this.update=(a,n,i)=>this.restService.request({method:"PUT",url:`/api/app/store/${a}`,body:n},{apiName:this.apiName,...i})}static#t=this.\u0275fac=function(a){return new(a||o)(t.LFG(p.vgb))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var b=l(9585),Z=l(4115),C=l(2695);function A(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createStore())}),t._UZ(1,"i",30),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"abpLocalization"),t.qZA()()}2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"::newstore")))}function v(o,c){1&o&&(t._uU(0),t.ALo(1,"abpLocalization")),2&o&&t.hij(" ",t.lcZ(1,1,"::Enum:StoreStatus."+c.row.status)," ")}function q(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().row,i=t.oxw();return t.KtG(i.editStore(n.id))}),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"::Edit")," "))}function L(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().row,i=t.oxw();return t.KtG(i.suspendStore(n.id))}),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"::storesuspend")," "))}function y(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().row,i=t.oxw();return t.KtG(i.editStore(n.id))}),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"::paymentconfig")," "))}function N(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().row,i=t.oxw();return t.KtG(i.deleteStore(n.id))}),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"::passwordreset")," "))}function U(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",31),t.YNc(1,q,3,3,"button",32),t.YNc(2,L,3,3,"button",33),t.qZA(),t.TgZ(3,"div",34)(4,"button",35),t._UZ(5,"i",36),t._uU(6),t.ALo(7,"abpLocalization"),t.qZA(),t.TgZ(8,"div",37),t.YNc(9,y,3,3,"button",38),t.TgZ(10,"button",39),t.NdJ("click",function(){const i=t.CHM(e).row,r=t.oxw();return t.KtG(r.deleteStore(i.id))}),t._uU(11),t.ALo(12,"abpLocalization"),t.qZA(),t.YNc(13,N,3,3,"button",38),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("abpPermission","StoreManagement.Edit"),t.xp6(1),t.Q6J("abpPermission","StoreManagement.Edit"),t.xp6(4),t.hij("",t.lcZ(7,6,"::moreActions")," "),t.xp6(3),t.Q6J("abpPermission","StoreManagement.Edit"),t.xp6(2),t.hij(" ",t.lcZ(12,8,"::staffmanage")," "),t.xp6(2),t.Q6J("abpPermission","StoreManagement.Edit"))}function J(o,c){if(1&o&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.selectedStore&&e.selectedStore.id?"::editstore":"::newstore"))}}function M(o,c){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()),2&o){const e=c.$implicit,a=t.oxw(2);t.Q6J("ngValue",e.value)("selected",e.value===a.selectedStore.status),t.xp6(1),t.hij(" ",t.lcZ(2,3,"::Enum:StoreStatus."+e.value)," ")}}function w(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"form",42),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.save())}),t.TgZ(1,"div",43)(2,"label",44),t._uU(3),t.ALo(4,"abpLocalization"),t.qZA(),t.TgZ(5,"span"),t._uU(6," * "),t.qZA(),t._UZ(7,"input",45),t.qZA(),t.TgZ(8,"div",43)(9,"label",46),t._uU(10),t.ALo(11,"abpLocalization"),t.qZA(),t.TgZ(12,"span"),t._uU(13," * "),t.qZA(),t._UZ(14,"input",47),t.qZA(),t.TgZ(15,"div",43)(16,"label",48),t._uU(17),t.ALo(18,"abpLocalization"),t.qZA(),t.TgZ(19,"span"),t._uU(20," * "),t.qZA(),t._UZ(21,"input",49),t.qZA(),t.TgZ(22,"div",43)(23,"label",50),t._uU(24),t.ALo(25,"abpLocalization"),t.qZA(),t.TgZ(26,"span"),t._uU(27," * "),t.qZA(),t._UZ(28,"input",51),t.qZA(),t.TgZ(29,"div",43)(30,"label"),t._uU(31),t.ALo(32,"abpLocalization"),t.qZA(),t.TgZ(33,"span"),t._uU(34," * "),t.qZA(),t.TgZ(35,"select",52),t.NdJ("change",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onselectionChanged(n.target.value))}),t.YNc(36,M,3,5,"option",53),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(3),t.Oqu(t.lcZ(4,7,"::storename")),t.xp6(7),t.Oqu(t.lcZ(11,9,"::storefullname")),t.xp6(7),t.Oqu(t.lcZ(18,11,"::address")),t.xp6(7),t.Oqu(t.lcZ(25,13,"::phone")),t.xp6(7),t.Oqu(t.lcZ(32,15,"::storestatus")),t.xp6(5),t.Q6J("ngForOf",e.StatusTypes)}}function z(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",55),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA(),t.TgZ(3,"button",56),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.save())}),t._UZ(4,"i",57),t._uU(5),t.ALo(6,"abpLocalization"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,3,"::Close")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid),t.xp6(2),t.hij(" ",t.lcZ(6,5,"::Save")," ")}}const k=[{path:"",component:(()=>{class o{constructor(e,a,n,i){this.list=e,this.storeService=a,this.fb=n,this.confirmation=i,this.stores={items:[],totalCount:0},this.StatusTypes=x,this.selectedStore={},this.queryDto={},this.isModalOpen=!1,this.covertStoreDto=r=>{let d={};return d.address=r.address,d.creationDate=r.creationTime,d.fullName=r.fullName,d.name=r.name,d.phone=r.phone,d.status=r.status,d}}ngOnInit(){this.list.hookToQuery(a=>this.storeService.getList(a)).subscribe(a=>{this.stores=a})}createStore(){this.selectedStore={},this.buildForm(),this.isModalOpen=!0}editStore(e){this.storeService.get(e).subscribe(a=>{this.selectedStore=a,this.buildForm(),this.isModalOpen=!0})}suspendStore(e){this.storeService.get(e).subscribe(n=>{this.selectedStore=n}),this.selectedStore.status=1,this.storeService.update(this.selectedStore.id,this.covertStoreDto(this.selectedStore)).subscribe(()=>{this.list.get()})}deleteStore(e){this.confirmation.warn("::AreYouSureToDelete","AbpAccount::AreYouSure").subscribe(a=>{a===_.Tv.Status.confirm&&this.storeService.delete(e).subscribe(()=>this.list.get())})}buildForm(){this.form=this.fb.group({name:[this.selectedStore.name||null,s.Validators.required],fullname:[this.selectedStore.fullName||null,s.Validators.required],phone:[this.selectedStore.phone||null,s.Validators.required],address:[this.selectedStore.address||null,s.Validators.required],status:[this.selectedStore.status||1,s.Validators.required]})}save(){this.form.invalid||(this.form.value.status=this.selectedStore.status,(this.selectedStore.id?this.storeService.update(this.selectedStore.id,this.form.value):this.storeService.create(this.form.value)).subscribe(()=>{this.isModalOpen=!1,this.form.reset(),this.list.get()}))}onDateRangeChanged(e){this.queryDto.creationDateFrom=e.from,this.queryDto.creationDateTo=e.to}onselectionChanged(e){this.selectedStore.status=e}Query(){this.storeService.queryByFiltrationByQ(this.queryDto).subscribe(a=>{this.stores=a})}ResetQuery(){this.queryDto={}}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(p.XNV),t.Y36(T),t.Y36(s.qu),t.Y36(_.YP))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-store"]],features:[t._Bn([p.XNV,{provide:m.DO,useClass:m.s5}])],decls:62,vars:50,consts:[[1,"card"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-6"],[1,"card-title"],["id","2div",1,"col-6","d-flex","justify-content-end"],["id","create","class","btn btn-primary","type","button",3,"click",4,"abpPermission"],[1,"container","border","p-3"],[1,"col-md-1"],[1,"col-md-4"],[3,"fromdate","todate","fromdateChange","todateChange","dateRangeChanged"],[1,"col-md-2"],["type","text","placeholder","\u8bf7\u8f93\u5165\u5546\u6237\u53f7",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","\u8bf7\u8f93\u5165\u95e8\u5e97\u7f16\u7801",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-sm","mr-2",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"click"],["default","",3,"rows","count","list"],["prop","name",3,"name"],["prop","fullName",3,"name"],["prop","address",3,"name"],["prop","phone",3,"name"],["prop","status",3,"name"],["ngx-datatable-cell-template",""],["prop","creationTime",3,"name"],[3,"name","maxWidth","sortable"],[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","create","type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus","me-1"],["role","group",1,"btn-group","mr-4"],["class","btn btn-sm  text-black mr-2",3,"click",4,"abpPermission"],["class","btn btn-sm  text-black",3,"click",4,"abpPermission"],["ngbDropdown","","container","body",1,"btn","btn-sm","border-0","bg-transparent"],["data-toggle","dropdown","aria-haspopup","true","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog","me-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"abpPermission"],["ngbDropdownItem","",3,"click"],[1,"btn","btn-sm","text-black","mr-2",3,"click"],[1,"btn","btn-sm","text-black",3,"click"],[3,"formGroup","ngSubmit"],[1,"mt-2"],["for","storename"],["type","text","id","name","formControlName","name","autofocus","",1,"form-control"],["for","storefullname"],["type","text","id","fullname","formControlName","fullname",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address",1,"form-control"],["for","fullname"],["type","text","id","phone","formControlName","phone",1,"form-control"],["id","status",1,"form-control",3,"change"],[3,"ngValue","selected",4,"ngFor","ngForOf"],[3,"ngValue","selected"],["type","button","abpClose","",1,"btn","btn-secondary"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-check","mr-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5),t.ALo(6,"abpLocalization"),t.qZA()(),t.TgZ(7,"div",5),t.YNc(8,A,5,3,"button",6),t.qZA()(),t.TgZ(9,"div",7)(10,"div",2)(11,"div",8)(12,"label"),t._uU(13),t.ALo(14,"abpLocalization"),t.qZA()(),t.TgZ(15,"div",9)(16,"datepicker-range-popup",10),t.NdJ("fromdateChange",function(r){return n.queryDto.creationDateFrom=r})("todateChange",function(r){return n.queryDto.creationDateTo=r})("dateRangeChanged",function(r){return n.onDateRangeChanged(r)}),t.qZA()(),t.TgZ(17,"div",8)(18,"label"),t._uU(19),t.ALo(20,"abpLocalization"),t.qZA()(),t.TgZ(21,"div",11)(22,"input",12),t.NdJ("ngModelChange",function(r){return n.queryDto.name=r}),t.qZA()(),t.TgZ(23,"div",8)(24,"label"),t._uU(25),t.ALo(26,"abpLocalization"),t.qZA()(),t.TgZ(27,"div",11)(28,"input",13),t.NdJ("ngModelChange",function(r){return n.queryDto.id=r}),t.qZA()(),t.TgZ(29,"div",11)(30,"button",14),t.NdJ("click",function(){return n.Query()}),t._uU(31),t.ALo(32,"abpLocalization"),t.qZA(),t._uU(33," \xa0 "),t.TgZ(34,"button",15),t.NdJ("click",function(){return n.ResetQuery()}),t._uU(35),t.ALo(36,"abpLocalization"),t.qZA()()()()(),t.TgZ(37,"div",1)(38,"ngx-datatable",16),t._UZ(39,"ngx-datatable-column",17),t.ALo(40,"abpLocalization"),t._UZ(41,"ngx-datatable-column",18),t.ALo(42,"abpLocalization"),t._UZ(43,"ngx-datatable-column",19),t.ALo(44,"abpLocalization"),t._UZ(45,"ngx-datatable-column",20),t.ALo(46,"abpLocalization"),t.TgZ(47,"ngx-datatable-column",21),t.ALo(48,"abpLocalization"),t.YNc(49,v,2,3,"ng-template",22),t.qZA(),t._UZ(50,"ngx-datatable-column",23),t.ALo(51,"abpLocalization"),t.TgZ(52,"ngx-datatable-column",24),t.ALo(53,"abpLocalization"),t.YNc(54,U,14,10,"ng-template",22),t.qZA()()()(),t.TgZ(55,"abp-modal",25),t.NdJ("visibleChange",function(r){return n.isModalOpen=r}),t.YNc(56,J,3,3,"ng-template",null,26,t.W1O),t.YNc(58,w,37,17,"ng-template",null,27,t.W1O),t.YNc(60,z,7,7,"ng-template",null,28,t.W1O),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,24,"::Menu:stores")," "),t.xp6(3),t.Q6J("abpPermission","StoreManagement.Creation"),t.xp6(5),t.hij(" ",t.lcZ(14,26,"::creationDate"),""),t.xp6(3),t.Q6J("fromdate",n.queryDto.creationDateFrom)("todate",n.queryDto.creationDateTo),t.xp6(3),t.Oqu(t.lcZ(20,28,"::storename")),t.xp6(3),t.Q6J("ngModel",n.queryDto.name),t.xp6(3),t.Oqu(t.lcZ(26,30,"::storeid")),t.xp6(3),t.Q6J("ngModel",n.queryDto.id),t.xp6(3),t.Oqu(t.lcZ(32,32,"::find")),t.xp6(4),t.Oqu(t.lcZ(36,34,"::reset")),t.xp6(3),t.Q6J("rows",n.stores.items)("count",n.stores.totalCount)("list",n.list),t.xp6(1),t.Q6J("name",t.lcZ(40,36,"::storename")),t.xp6(2),t.Q6J("name",t.lcZ(42,38,"::storefullname")),t.xp6(2),t.Q6J("name",t.lcZ(44,40,"::address")),t.xp6(2),t.Q6J("name",t.lcZ(46,42,"::phone")),t.xp6(2),t.Q6J("name",t.lcZ(48,44,"::storestatus")),t.xp6(3),t.Q6J("name",t.lcZ(51,46,"::creationTime")),t.xp6(2),t.Q6J("name",t.lcZ(53,48,"::Actions"))("maxWidth",250)("sortable",!1),t.xp6(3),t.Q6J("visible",n.isModalOpen))},dependencies:[h.sg,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.On,s.sg,s.u,p.Uqp,p.YzZ,p.l97,b.nE,b.UC,b.vq,Z.hL,Z.J5,_.zS,_.x7,_.j3,_.YM,m.jt,m.iD,m.Vi,m.TH,C.g,p.fuE]})}return o})()}];let D=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(k),f.Bz]})}return o})(),F=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[h.ez,S.m,D,m.M]})}return o})()}}]);