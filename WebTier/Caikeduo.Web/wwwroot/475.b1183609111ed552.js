"use strict";(self.webpackChunkAccessManagment=self.webpackChunkAccessManagment||[]).push([[475],{5475:(Ie,j,c)=>{c.r(j),c.d(j,{ACCOUNT_CONFIG_OPTIONS:()=>S,ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS:()=>M,AccountExtensionsGuard:()=>Y,AccountModule:()=>Me,AuthenticationFlowGuard:()=>E,ChangePasswordComponent:()=>U,DEFAULT_ACCOUNT_FORM_PROPS:()=>te,ForgotPasswordComponent:()=>O,LoginComponent:()=>x,ManageProfileComponent:()=>R,ManageProfileStateService:()=>Z,PersonalSettingsComponent:()=>I,PersonalSettingsHalfRowComponent:()=>P,RE_LOGIN_CONFIRMATION_TOKEN:()=>q,RegisterComponent:()=>J,ResetPasswordComponent:()=>z});var s=c(6304),l=c(6104),e=c(2223),ne=c(939),u=c(4115),g=c(672),m=(()=>((m=m||{})[m.Success=1]="Success",m[m.InvalidUserNameOrPassword=2]="InvalidUserNameOrPassword",m[m.NotAllowed=3]="NotAllowed",m[m.LockedOut=4]="LockedOut",m[m.RequiresTwoFactor=5]="RequiresTwoFactor",m))();(0,s.Uoq)(m),this.\u0275fac=function(o){return new(o||T)(e.LFG(s.vgb))},this.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});let y=(()=>{class t{constructor(o){this.restService=o,this.apiName="AbpAccount",this.register=n=>this.restService.request({method:"POST",url:"/api/account/register",body:n},{apiName:this.apiName}),this.resetPassword=n=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:n},{apiName:this.apiName}),this.sendPasswordResetCode=n=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:n},{apiName:this.apiName})}static#e=this.\u0275fac=function(n){return new(n||t)(e.LFG(s.vgb))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),L=(()=>{class t{constructor(o){this.restService=o,this.apiName="AbpAccount",this.changePassword=n=>this.restService.request({method:"POST",url:"/api/account/my-profile/change-password",body:n},{apiName:this.apiName}),this.get=()=>this.restService.request({method:"GET",url:"/api/account/my-profile"},{apiName:this.apiName}),this.update=n=>this.restService.request({method:"PUT",url:"/api/account/my-profile",body:n},{apiName:this.apiName})}static#e=this.\u0275fac=function(n){return new(n||t)(e.LFG(s.vgb))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var r=c(5030),A=c(8746),Q=c(262),pe=c(9300),ue=c(3900),G=c(4004),me=c(8505),h=c(4755),$=c(2843),N=c(1591),f=c(9338);function de(t,p){if(1&t){const o=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"span"),e._uU(9," * "),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"abp-button",6),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e.TgZ(14,"a",7),e._UZ(15,"i",8),e._uU(16),e.ALo(17,"abpLocalization"),e.qZA()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(2),e.Oqu(e.lcZ(3,7,"AbpAccount::SendPasswordResetLink_Information")),e.xp6(4),e.Oqu(e.lcZ(7,9,"AbpAccount::EmailAddress")),e.xp6(5),e.Q6J("loading",o.inProgress)("disabled",null==o.form?null:o.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(13,11,"AbpAccount::Submit")," "),e.xp6(4),e.Oqu(e.lcZ(17,13,"AbpAccount::Login"))}}function fe(t,p){1&t&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"a",7)(4,"button",9),e._UZ(5,"i",8),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::PasswordResetMailSentMessage")," "),e.xp6(5),e.hij(" ",e.lcZ(7,4,"AbpAccount::BackToLogin")," "))}function ge(t,p){1&t&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"abpLocalization"),e.TgZ(3,"a",15),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::AreYouANewUser")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"AbpAccount::Register")))}function he(t,p){1&t&&(e.TgZ(0,"div",2)(1,"label",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"span"),e._uU(5," * "),e.qZA(),e._UZ(6,"input",9),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}function be(t,p){if(1&t){const o=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.submit())}),e._UZ(1,"abp-extensible-form",2),e.TgZ(2,"abp-button",3),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("selectedRecord",o.selected),e.xp6(1),e.Q6J("loading",o.inProgress),e.xp6(1),e.hij(" ",e.lcZ(4,4,"AbpIdentity::Save"),"")}}const V=function(t){return{active:t}};function Ae(t,p){if(1&t){const o=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.selectedTab=0)}),e.TgZ(1,"a",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,V,0===o.selectedTab)),e.xp6(1),e.Oqu(e.lcZ(3,2,"AbpUi::ChangePassword"))}}function ve(t,p){1&t&&e._UZ(0,"abp-change-password-form")}const K=function(t){return{componentKey:t}};function _e(t,p){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4"),e._uU(3),e.ALo(4,"abpLocalization"),e._UZ(5,"hr"),e.qZA(),e.YNc(6,ve,1,0,"abp-change-password-form",15),e.qZA()()),2&t){const o=e.oxw(2);e.Q6J("@fadeIn",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,3,"AbpIdentity::ChangePassword")," "),e.xp6(3),e.Q6J("abpReplaceableTemplate",e.VKq(5,K,o.changePasswordKey))}}function we(t,p){1&t&&e._UZ(0,"abp-personal-settings-form")}function Se(t,p){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4"),e._uU(3),e.ALo(4,"abpLocalization"),e._UZ(5,"hr"),e.qZA(),e.YNc(6,we,1,0,"abp-personal-settings-form",15),e.qZA()()),2&t){const o=e.oxw(2);e.Q6J("@fadeIn",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,3,"AbpIdentity::PersonalSettings")," "),e.xp6(3),e.Q6J("abpReplaceableTemplate",e.VKq(5,K,o.personalSettingsKey))}}function Ze(t,p){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,_e,7,7,"div",12),e.YNc(2,Se,7,7,"div",12),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",0===o.selectedTab),e.xp6(1),e.Q6J("ngIf",1===o.selectedTab)}}function Ce(t,p){if(1&t){const o=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(1,"div",3)(2,"label",4),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA(),e.TgZ(5,"span"),e._uU(6," * "),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"div",3)(9,"label",6),e._uU(10),e.ALo(11,"abpLocalization"),e.qZA(),e.TgZ(12,"span"),e._uU(13," * "),e.qZA(),e._UZ(14,"input",7),e.qZA(),e.TgZ(15,"div",3)(16,"label",8),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA(),e.TgZ(19,"span"),e._uU(20," * "),e.qZA(),e._UZ(21,"input",9),e.qZA(),e.TgZ(22,"abp-button",10),e._uU(23),e.ALo(24,"abpLocalization"),e.qZA()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(3),e.Oqu(e.lcZ(4,6,"AbpAccount::UserName")),e.xp6(7),e.Oqu(e.lcZ(11,8,"AbpAccount::EmailAddress")),e.xp6(7),e.Oqu(e.lcZ(18,10,"AbpAccount::Password")),e.xp6(5),e.Q6J("loading",o.inProgress),e.xp6(1),e.hij(" ",e.lcZ(24,12,"AbpAccount::Register")," ")}}function Pe(t,p){if(1&t){const o=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"span"),e._uU(9," * "),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"div",3)(12,"label",6),e._uU(13),e.ALo(14,"abpLocalization"),e.qZA(),e.TgZ(15,"span"),e._uU(16," * "),e.qZA(),e._UZ(17,"input",7),e.qZA(),e.TgZ(18,"button",8),e._uU(19),e.ALo(20,"abpLocalization"),e.qZA(),e.TgZ(21,"abp-button",9),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.onSubmit())}),e._uU(22),e.ALo(23,"abpLocalization"),e.qZA()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form)("mapErrorsFn",o.mapErrorsFn),e.xp6(2),e.Oqu(e.lcZ(3,8,"AbpAccount::ResetPassword_Information")),e.xp6(4),e.Oqu(e.lcZ(7,10,"AbpAccount::Password")),e.xp6(7),e.Oqu(e.lcZ(14,12,"AbpAccount::ConfirmPassword")),e.xp6(6),e.hij(" ",e.lcZ(20,14,"AbpAccount::Cancel")," "),e.xp6(2),e.Q6J("loading",o.inProgress),e.xp6(1),e.hij(" ",e.lcZ(23,16,"AbpAccount::Submit")," ")}}function Te(t,p){1&t&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"a",10)(4,"button",11),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::YourPasswordIsSuccessfullyReset")," "),e.xp6(4),e.hij(" ",e.lcZ(6,4,"AbpAccount::BackToLogin")," "))}let O=(()=>{class t{constructor(o,n){this.fb=o,this.accountService=n,this.isEmailSent=!1,this.form=this.fb.group({email:["",[r.Validators.required,r.Validators.email]]})}onSubmit(){this.form.invalid||(this.inProgress=!0,this.accountService.sendPasswordResetCode({email:this.form.get("email")?.value,appName:"Angular"}).pipe((0,A.x)(()=>this.inProgress=!1)).subscribe(()=>{this.isEmailSent=!0}))}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.QS),e.Y36(y))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-forgot-password"]],decls:6,vars:5,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["emailSentTemplate",""],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["buttonClass","mt-2 mb-3 btn btn-primary btn-block","buttonType","submit",1,"d-block",3,"loading","disabled"],["routerLink","/account/login"],["aria-hidden","true",1,"fa","fa-long-arrow-left","me-1"],[1,"d-block","mt-2","mb-3","btn","btn-primary","btn-block"]],template:function(n,i){if(1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,de,18,15,"form",0),e.YNc(4,fe,8,6,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(5);e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpAccount::ForgotPassword")),e.xp6(2),e.Q6J("ngIf",!i.isEmailSent)("ngIfElse",a)}},dependencies:[h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.rH,s.YzZ,u.hL,u.J5,l.r0,s.fuE],encapsulation:2})}return t})();const S=new e.OlP("ACCOUNT_CONFIG_OPTIONS");function B(t){const p=t.get(g.gz),o=t.get(S);return p.snapshot.queryParams.returnUrl||o.redirectUrl||"/"}const{maxLength:H,required:X}=r.Validators;let x=(()=>{class t{constructor(o,n,i,a,d){this.injector=o,this.fb=n,this.toasterService=i,this.authService=a,this.configState=d,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()}buildForm(){this.form=this.fb.group({username:["",[X,H(255)]],password:["",[X,H(128)]],rememberMe:[!1]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const{username:o,password:n,rememberMe:i}=this.form.value,a=B(this.injector);this.authService.login({username:o,password:n,rememberMe:i,redirectUrl:a}).pipe((0,Q.K)(d=>(this.toasterService.error(d.error?.error_description||d.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),(0,$._)(d))),(0,A.x)(()=>this.inProgress=!1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(e.zs3),e.Y36(r.QS),e.Y36(l.MJ),e.Y36(s.e80),e.Y36(s.XJE))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-login"]],decls:29,vars:21,consts:[[4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","login-input-user-name-or-email-address",1,"form-label"],["type","text","id","login-input-user-name-or-email-address","formControlName","username","autocomplete","username","autofocus","",1,"form-control"],["for","login-input-password",1,"form-label"],["type","password","id","login-input-password","formControlName","password","autocomplete","current-password",1,"form-control"],[1,"row"],[1,"col"],[1,"form-check"],["for","login-input-remember-me",1,"form-check-label","mb-2"],["type","checkbox","id","login-input-remember-me","formControlName","rememberMe",1,"form-check-input"],[1,"text-end","col"],["routerLink","/account/forgot-password"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"],["routerLink","/account/register","queryParamsHandling","preserve",1,"text-decoration-none"]],template:function(n,i){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,ge,6,6,"strong",0),e.TgZ(4,"form",1),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(5,"div",2)(6,"label",3),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2)(11,"label",5),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e._UZ(14,"input",6),e.qZA(),e.TgZ(15,"div",7)(16,"div",8)(17,"div",9)(18,"label",10),e._UZ(19,"input",11),e._uU(20),e.ALo(21,"abpLocalization"),e.qZA()()(),e.TgZ(22,"div",12)(23,"a",13),e._uU(24),e.ALo(25,"abpLocalization"),e.qZA()()(),e.TgZ(26,"abp-button",14),e._uU(27),e.ALo(28,"abpLocalization"),e.qZA()()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,9,"AbpAccount::Login")),e.xp6(2),e.Q6J("ngIf",i.isSelfRegistrationEnabled),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(3),e.Oqu(e.lcZ(8,11,"AbpAccount::UserNameOrEmailAddress")),e.xp6(5),e.Oqu(e.lcZ(13,13,"AbpAccount::Password")),e.xp6(8),e.hij(" ",e.lcZ(21,15,"AbpAccount::RememberMe")," "),e.xp6(4),e.Oqu(e.lcZ(25,17,"AbpAccount::ForgotPassword")),e.xp6(2),e.Q6J("loading",i.inProgress),e.xp6(1),e.hij(" ",e.lcZ(28,19,"AbpAccount::Login")," "))},dependencies:[h.O5,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.sg,r.u,g.rH,s.Uqp,s.YzZ,u.hL,u.J5,l.r0,s.fuE],encapsulation:2})}return t})(),Z=(()=>{class t{constructor(){this.store=new s.gSB({})}get createOnUpdateStream(){return this.store.sliceUpdate}getProfile$(){return this.store.sliceState(o=>o.profile)}getProfile(){return this.store.state.profile}setProfile(o){this.store.patch({profile:o})}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const{required:C}=r.Validators,W=["newPassword","repeatNewPassword"];let U=(()=>{class t{constructor(o,n,i,a,d){this.fb=o,this.injector=n,this.toasterService=i,this.profileService=a,this.manageProfileState=d,this.mapErrorsFn=(b,_,w)=>W.indexOf(String(w?.name))<0?b:b.concat(_.filter(({key:k})=>"passwordMismatch"===k))}ngOnInit(){this.hideCurrentPassword=!this.manageProfileState.getProfile()?.hasPassword;const o=(0,l.dD)(this.injector);this.form=this.fb.group({password:["",C],newPassword:["",{validators:[C,...o]}],repeatNewPassword:["",{validators:[C,...o]}]},{validators:[(0,u.z)(W)]}),this.hideCurrentPassword&&this.form.removeControl("password")}onSubmit(){this.form.invalid||(this.inProgress=!0,this.profileService.changePassword({...!this.hideCurrentPassword&&{currentPassword:this.form.get("password")?.value},newPassword:this.form.get("newPassword")?.value}).pipe((0,A.x)(()=>this.inProgress=!1)).subscribe({next:()=>{this.form.reset(),this.toasterService.success("AbpAccount::PasswordChangedMessage","",{life:5e3}),this.hideCurrentPassword&&(this.hideCurrentPassword=!1,this.form.addControl("password",new r.p4("",[C])))},error:o=>{this.toasterService.error(o.error?.error?.message||"AbpAccount::DefaultErrorMessage")}}))}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.QS),e.Y36(e.zs3),e.Y36(l.MJ),e.Y36(L),e.Y36(Z))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],decls:19,vars:14,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],["class","mb-3 form-group",4,"ngIf"],[1,"mb-3","form-group"],["for","new-password",1,"form-label"],["type","password","id","new-password","formControlName","newPassword","autocomplete","new-password",1,"form-control"],["for","confirm-new-password",1,"form-label"],["type","password","id","confirm-new-password","formControlName","repeatNewPassword","autocomplete","new-password",1,"form-control"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",3,"loading","disabled"],["for","current-password",1,"form-label"],["type","password","id","current-password","formControlName","password","autofocus","","autocomplete","current-password",1,"form-control"]],template:function(n,i){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.YNc(1,he,7,3,"div",1),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA(),e.TgZ(6,"span"),e._uU(7," * "),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA(),e.TgZ(13,"span"),e._uU(14," * "),e.qZA(),e._UZ(15,"input",6),e.qZA(),e.TgZ(16,"abp-button",7),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA()()),2&n&&(e.Q6J("formGroup",i.form)("mapErrorsFn",i.mapErrorsFn),e.xp6(1),e.Q6J("ngIf",!i.hideCurrentPassword),e.xp6(3),e.Oqu(e.lcZ(5,8,"AbpIdentity::DisplayName:NewPassword")),e.xp6(7),e.Oqu(e.lcZ(12,10,"AbpIdentity::DisplayName:NewPasswordConfirm")),e.xp6(5),e.Q6J("loading",i.inProgress)("disabled",null==i.form?null:i.form.invalid),e.xp6(1),e.Oqu(e.lcZ(18,12,"AbpIdentity::Save")))},dependencies:[h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,s.Uqp,s.YzZ,u.hL,u.J5,l.r0,s.fuE],encapsulation:2})}return t})();const q=new e.OlP("RE_LOGIN_CONFIRMATION_TOKEN");let P=(()=>{class t{constructor(o){this.propData=o,this.displayName=o.displayName,this.name=o.name,this.id=o.id||""}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(f.QN))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-personal-settings-half-row"]],features:[e._Bn([],[f.YJ])],decls:5,vars:7,consts:[[1,"w-50","d-inline"],[1,"form-label"],["type","text",1,"form-control",3,"formControlName"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e._UZ(4,"input",2),e.qZA()),2&n&&(e.xp6(1),e.uIk("for",i.name),e.xp6(1),e.hij("",e.lcZ(3,5,i.displayName)," "),e.xp6(2),e.Q6J("formControlName",i.name),e.uIk("id",i.id)("name",i.name))},dependencies:[r.Fj,r.JJ,r.u,u.J5,s.fuE],encapsulation:2})}return t})();const{maxLength:v,required:ee,email:ye}=r.Validators,te={"Account.PersonalSettingsComponent":f.Od.createMany([{type:"string",name:"userName",displayName:"AbpIdentity::DisplayName:UserName",id:"username",validators:()=>[ee,v(256)]},{type:"string",name:"name",displayName:"AbpIdentity::DisplayName:Name",id:"name",validators:()=>[v(64)],template:P,className:"d-inline-block w-50"},{type:"string",name:"surname",displayName:"AbpIdentity::DisplayName:Surname",id:"surname",validators:()=>[v(64)],className:"d-inline-block w-50 ps-4",template:P},{type:"string",name:"email",displayName:"AbpIdentity::DisplayName:Email",id:"email-address",validators:()=>[ee,ye,v(256)]},{type:"string",name:"phoneNumber",displayName:"AbpIdentity::DisplayName:PhoneNumber",id:"phone-number",validators:()=>[v(16)]}])},M=new e.OlP("ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS");let I=(()=>{class t{constructor(o,n,i,a,d,b,_,w){this.fb=o,this.toasterService=n,this.profileService=i,this.manageProfileState=a,this.authService=d,this.confirmationService=b,this.isPersonalSettingsChangedConfirmationActive=_,this.injector=w,this.logoutConfirmation=()=>{this.authService.logout().subscribe()}}buildForm(){if(this.selected=this.manageProfileState.getProfile(),!this.selected)return;const o=new f.lg(this.injector,this.selected);this.form=(0,f.se)(o)}ngOnInit(){this.buildForm()}submit(){if(this.form.invalid)return;const o=this.isLogoutConfirmMessageActive();this.inProgress=!0,this.profileService.update(this.form.value).pipe((0,A.x)(()=>this.inProgress=!1)).subscribe(n=>{this.manageProfileState.setProfile(n),this.toasterService.success("AbpAccount::PersonalSettingsSaved","Success",{life:5e3}),o&&this.showLogoutConfirmMessage()})}isLogoutConfirmMessageActive(){return this.isPersonalSettingsChangedConfirmationActive}showLogoutConfirmMessage(){this.confirmationService.info("AbpAccount::PersonalSettingsChangedConfirmationModalDescription","AbpAccount::PersonalSettingsChangedConfirmationModalTitle").pipe((0,pe.h)(o=>o===l.Tv.Status.confirm)).subscribe(this.logoutConfirmation)}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.QS),e.Y36(l.MJ),e.Y36(L),e.Y36(Z),e.Y36(s.e80),e.Y36(l.YP),e.Y36(q),e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-personal-settings-form"]],exportAs:["abpPersonalSettingsForm"],features:[e._Bn([{provide:f.ex,useValue:"Account.PersonalSettingsComponent"}])],decls:1,vars:1,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[3,"selectedRecord"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"loading"]],template:function(n,i){1&n&&e.YNc(0,be,5,6,"form",0),2&n&&e.Q6J("ngIf",i.form)},dependencies:[h.O5,r._Y,r.JL,r.sg,s.YzZ,u.hL,l.r0,f.gt,s.fuE],encapsulation:2})}return t})(),R=(()=>{class t{constructor(o,n){this.profileService=o,this.manageProfileState=n,this.selectedTab=0,this.changePasswordKey="Account.ChangePasswordComponent",this.personalSettingsKey="Account.PersonalSettingsComponent",this.profile$=this.manageProfileState.getProfile$()}ngOnInit(){this.profileService.get().subscribe(o=>{this.manageProfileState.setProfile(o),o.isExternal&&(this.hideChangePasswordTab=!0,this.selectedTab=1)})}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(L),e.Y36(Z))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-manage-profile"]],decls:15,vars:15,consts:[["id","AbpContentToolbar"],[1,"card","border-0","shadow-sm","min-h-400",3,"abpLoading"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item","mb-2",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],["class","col-12 col-md-9",4,"ngIf"],[1,"nav-item",3,"click"],[1,"col-12","col-md-9"],["class","tab-content",4,"ngIf"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"],[4,"abpReplaceableTemplate"]],template:function(n,i){if(1&n&&(e._UZ(0,"div",0),e.TgZ(1,"div",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5),e.YNc(7,Ae,4,6,"li",6),e.ALo(8,"async"),e.TgZ(9,"li",7),e.NdJ("click",function(){return i.selectedTab=1}),e.TgZ(10,"a",8),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA()()()(),e.YNc(13,Ze,3,2,"div",9),e.ALo(14,"async"),e.qZA()()()),2&n){let a;e.xp6(1),e.Q6J("abpLoading",!(null!=(a=e.lcZ(2,5,i.profile$))&&a.userName)),e.xp6(6),e.Q6J("ngIf",!i.hideChangePasswordTab&&e.lcZ(8,7,i.profile$)),e.xp6(3),e.Q6J("ngClass",e.VKq(13,V,1===i.selectedTab)),e.xp6(1),e.Oqu(e.lcZ(12,9,"AbpAccount::PersonalSettings")),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,11,i.profile$))}},dependencies:[h.mk,h.O5,s.zLP,l.TH,U,I,h.Ov,s.fuE],styles:[".min-h-400[_ngcontent-%COMP%]{min-height:400px}"],data:{animation:[(0,N.X$)("fadeIn",[(0,N.eR)(":enter",(0,N._7)(l.Ji))])]}})}return t})();const{maxLength:Ne,required:F,email:Oe}=r.Validators;let J=(()=>{class t{constructor(o,n,i,a,d,b){this.fb=o,this.accountService=n,this.configState=i,this.toasterService=a,this.authService=d,this.injector=b,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase(),this.isSelfRegistrationEnabled||this.toasterService.warn({key:"AbpAccount::SelfRegistrationDisabledMessage",defaultValue:"Self registration is disabled."},"",{life:1e4})}buildForm(){this.form=this.fb.group({username:["",[F,Ne(255)]],password:["",[F,...(0,l.dD)(this.injector)]],email:["",[F,Oe]]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const o={userName:this.form.get("username")?.value,password:this.form.get("password")?.value,emailAddress:this.form.get("email")?.value,appName:"Angular"};this.accountService.register(o).pipe((0,ue.w)(()=>this.authService.login({username:o.userName,password:o.password,redirectUrl:B(this.injector)})),(0,Q.K)(n=>(this.toasterService.error(n.error?.error_description||n.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),(0,$._)(n))),(0,A.x)(()=>this.inProgress=!1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.QS),e.Y36(y),e.Y36(s.XJE),e.Y36(l.MJ),e.Y36(s.e80),e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-register"]],decls:10,vars:10,consts:[["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","input-user-name",1,"form-label"],["autofocus","","type","text","id","input-user-name","formControlName","username","autocomplete","username",1,"form-control"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"]],template:function(n,i){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"strong"),e._uU(4),e.ALo(5,"abpLocalization"),e.TgZ(6,"a",0),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA()(),e.YNc(9,Ce,25,14,"form",1)),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"AbpAccount::Register")),e.xp6(3),e.hij(" ",e.lcZ(5,6,"AbpAccount::AlreadyRegistered")," "),e.xp6(3),e.Oqu(e.lcZ(8,8,"AbpAccount::Login")),e.xp6(2),e.Q6J("ngIf",i.isSelfRegistrationEnabled))},dependencies:[h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.rH,s.Uqp,s.YzZ,u.hL,u.J5,l.r0,s.fuE],encapsulation:2})}return t})();const oe=["password","confirmPassword"];let z=(()=>{class t{constructor(o,n,i,a,d){this.fb=o,this.accountService=n,this.route=i,this.router=a,this.injector=d,this.inProgress=!1,this.isPasswordReset=!1,this.mapErrorsFn=(b,_,w)=>oe.indexOf(String(w?.name))<0?b:b.concat(_.filter(({key:k})=>"passwordMismatch"===k))}ngOnInit(){this.route.queryParams.subscribe(({userId:o,resetToken:n})=>{(!o||!n)&&this.router.navigateByUrl("/account/login"),this.form=this.fb.group({userId:[o,[r.Validators.required]],resetToken:[n,[r.Validators.required]],password:["",[r.Validators.required,...(0,l.dD)(this.injector)]],confirmPassword:["",[r.Validators.required,...(0,l.dD)(this.injector)]]},{validators:[(0,u.z)(oe)]})})}onSubmit(){this.form.invalid||this.inProgress||(this.inProgress=!0,this.accountService.resetPassword({userId:this.form.get("userId")?.value,resetToken:this.form.get("resetToken")?.value,password:this.form.get("password")?.value}).pipe((0,A.x)(()=>this.inProgress=!1)).subscribe(()=>{this.isPasswordReset=!0}))}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(r.QS),e.Y36(y),e.Y36(g.gz),e.Y36(g.F0),e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-reset-password"]],decls:6,vars:5,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit",4,"ngIf","ngIfElse"],["passwordResetTemplate",""],["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],[1,"mb-3","form-group"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password",1,"form-control"],["for","input-confirm-password",1,"form-label"],["type","password","id","input-confirm-password","formControlName","confirmPassword",1,"form-control"],["type","button","routerLink","/account/login",1,"me-2","btn","btn-secondary"],["buttonType","submit","buttonClass","me-2 btn btn-primary",3,"loading","click"],["routerLink","/account/login"],[1,"d-block","mt-2","mb-3","btn","btn-primary"]],template:function(n,i){if(1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,Pe,24,18,"form",0),e.YNc(4,Te,7,6,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(5);e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpAccount::ResetPassword")),e.xp6(2),e.Q6J("ngIf",!i.isPasswordReset)("ngIfElse",a)}},dependencies:[h.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.rH,s.YzZ,u.hL,u.J5,l.r0,s.fuE],encapsulation:2})}return t})(),E=(()=>{class t{constructor(){this.authService=(0,e.f3M)(s.e80)}canActivate(){return!!this.authService.isInternalAuth||(this.authService.navigateToLogin(),!1)}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})(),Y=(()=>{class t{constructor(){this.configState=(0,e.f3M)(s.XJE),this.extensions=(0,e.f3M)(f.X6)}canActivate(){const n=(0,e.f3M)(M,{optional:!0})||{};return(0,f.ot)(this.configState,"Identity").pipe((0,G.U)(i=>({"Account.PersonalSettingsComponent":i.User})),(0,f.V_)(this.configState,"AbpIdentity"),(0,me.b)(i=>{(0,f.Hp)(this.extensions.editFormProps,te,i.editForm,n)}),(0,G.U)(()=>!0))}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();const D=(0,g.BJ)([E]),xe=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:s.O39,children:[{path:"login",component:s.c$y,canActivate:D,data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:x}}},{path:"register",component:s.c$y,canActivate:D,data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:J}}},{path:"forgot-password",component:s.c$y,canActivate:D,data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:O}}},{path:"reset-password",component:s.c$y,canActivate:[],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:z}}},{path:"manage",component:s.c$y,canActivate:(0,g.BJ)([s.a1M,Y]),data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:R}}}]}];let Ue=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(xe),g.Bz]})}return t})();function qe(t){return{redirectUrl:"/",...t}}let Me=(()=>{class t{static forChild(o={}){return{ngModule:t,providers:[E,{provide:S,useValue:o},{provide:"ACCOUNT_OPTIONS",useFactory:qe,deps:[S]},{provide:q,useValue:o.isPersonalSettingsChangedConfirmationActive??!0},{provide:M,useValue:o.editFormPropContributors},Y]}}static forLazy(o={}){return new s.Cgl(t.forChild(o))}static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[s.IR2,Ue,l.e2,ne.XC,u.h2,f.Ms]})}return t})()}}]);